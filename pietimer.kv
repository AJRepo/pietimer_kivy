#:set pie_bg_color [1, 1, 1]
#:set timeleft_color [1, .1, .1]
#:set text_color [.1, .1, .1]
#:set my_color [1, .1, .5]
#:set text_area_hint [.5, .18]
AnalogClockFace:


<AnalogClockFace>:
    id: "CF"
    #Don't use both size and size_hint (e.g. set size_hint = None for using size)
    #size: root.x, root.y
    #size_hint: 1,1
    #size: 0.9*min(root.size), 0.9*min(root.size)
    #size: 1.9*self.minium_height, 1.9*self.minumum_width
    FloatLayout:
        id: "pie"
        size_hint: 1,1
        #size: 500, 400
        canvas:
            #can't have id for canvas
            #id: "piecanvas"
            Color:
                rgb: pie_bg_color
            Ellipse: 
                id: "backgroundpie"
                #pos: self.pos
                #pos: self.x, self.y
                #Pos is the lower left corner of the square bounding the ellipse. Ugh. 
                pos: self.center_x - (0.37 * self.width), self.center_y - (0.37 * self.height)
                #Ellipse can't use pos_hint
                #pos: 0,50
                size: .74 * self.width, .74 * self.height
                #size: .25 * self.width, .25 * self.height
                #size: self.width, self.height
                #angle_start: 0
                #angle_end: 180
            Color:
                rgb: timeleft_color
            Ellipse: 
                id: "foregroundpie"
                #Pos is the lower left corner of the square bounding the ellipse. Ugh. 
                pos: self.center_x - (0.37 * self.width), self.center_y - (0.37 * self.height)
                #Ellipse can't use pos_hint
                #pos: 0,50
                size: .74 * self.width, .74 * self.height
                angle_start: 0
                angle_end: 275

    AnchorLayout:
        size_hint: 1,.8
        id: "text_time"
        BoxLayout:
            id: "bottom_buttons"
            anchor_x: 'center'
            anchor_y: 'center'
            size_hint: text_area_hint #see vars at top of page
            Button:
                id: "hrs"
                disabled: True
                text: root.str_hours
                background_normal: ''
                background_disabled_normal: self.background_normal
                background_color: (.9,.9,.9,1)
                font_size: self.width/1.5
                #multiline: False
                #halign: 'center'
                #padding_top: self.height/4
                color: text_color
                #on_text_validate: root.set_new_time(self)
            Button:
                id: "min"
                disabled: True
                text: root.str_min
                background_normal: ''
                background_disabled_normal: self.background_normal
                background_color: (.9,.9,.9,1)
                font_size: self.width/1.5
                color: text_color
                #on_text_validate: root.set_new_time(self)
            Button:
                id: "sec"
                #disabled: root.running
                disabled: True
                text: root.str_sec
                background_normal: ''
                background_disabled_normal: self.background_normal
                background_color: (.9,.9,.9,1)
                font_size: self.width/1.5 #was 26
                color: text_color
        BoxLayout:
            id: "top_text_boxes"
            anchor_x: 'center'
            anchor_y: 'center'
            size_hint: text_area_hint
            opacity: root.top_opacity
            #canvas:
            #    Color:
            #        rgb: .9,0,.9
            #    Rectangle:
            #        size: self.size
            #        pos: self.pos
            TextInput:
                id: "hrs_top"
                disabled: root.running  #change to True when clock is running
                text: root.str_hours
                background_normal: ''
                background_disabled_normal: self.background_normal
                background_color: (.9,.9,.9,1)
                font_size: self.width/1.75
                multiline: False
                halign: 'center'
                padding_top: self.height/4
                color: text_color
                on_text_validate: root.set_new_time(self)
            TextInput:
                id: "min_top"
                disabled: root.running
                text: root.str_min
                background_normal: ''
                background_disabled_normal: self.background_normal
                background_color: (.9,.9,.9,1)
                font_size: self.width/1.75
                multiline: False
                halign: 'center'
                color: text_color
                on_text_validate: root.set_new_time(self)
            TextInput:
                id: "sec_top"
                #disabled: root.running
                disabled: root.running
                text: root.str_sec
                background_normal: ''
                background_disabled_normal: self.background_normal
                background_color: (.9,.9,.9,1)
                font_size: self.width/1.75
                multiline: False
                halign: 'center'
                color: text_color
                on_text_validate: root.set_new_time(self)

    AnchorLayout:
        id: "debug_buttons"
        anchor_x: 'right'
        anchor_y: 'bottom'
        Button:
            id: "debug_button"
            size_hint: .25, .1
            #pos_hint: {"x":0.8, "center_y":0.5}
            text: "DEBUG"
            on_press: root.print_debug(self)
            opacity: 0
            disabled: True

    AnchorLayout:
        id: "clock_buttons"
        anchor_x: 'left'
        anchor_y: 'top'
        Button:
            #FloatLayout only pos_hint and the size_hint properties of its children.
            id: "start_stop"
            size_hint: .2, .1
            #size_hint: None, None
            #size: 1.1* self.texture_size[0], 1.25* self.texture_size[1]
            #pos_hint: {"center_x":0.1, "center_y":0.1}
            text: "STOP"
            on_press: root.toggle_running(self)
    #FloatLayout:
    #    id: "clock_buttons"
    #    size_hint: None, None
    #    size: 0.9*min(root.size), 0.9*min(root.size)
    #    pos_hint: {"center_x":0.5, "center_y":0.5}
    #    Button:
    #        #FloatLayout only pos_hint and the size_hint properties of its children.
    #        id: "start_stop"
    #        size_hint: None, None
    #        #size: "70dp","30dp"
    #        size: 1.1* self.texture_size[0], 1.25* self.texture_size[1]
    #        pos_hint: {"center_x":0.1, "center_y":0.1}
    #        text: "STOP"
    #        on_press: root.toggle_running(self)


<Countdowntimer>:
    Button:
        text: "CountButton"
        size: "100dp", "200dp"
        pos: "100dp, 100dp"
#countdowntimer:
#CountdownTimer:
#
#<build>:
#    Button:
#        text: "HI"
# vim: ts=4 expandtab
